<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trinity Mission Control - Live System Monitor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: #000;
            color: #00ff00;
            overflow: hidden;
        }

        .mission-control {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: auto 1fr 1fr;
            gap: 10px;
            padding: 10px;
            height: 100vh;
        }

        .header {
            grid-column: 1 / -1;
            background: rgba(0, 255, 0, 0.1);
            border: 2px solid #00ff00;
            padding: 15px;
            text-align: center;
        }

        .header h1 {
            font-size: 2rem;
            text-shadow: 0 0 10px #00ff00;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .panel {
            background: rgba(0, 50, 0, 0.3);
            border: 2px solid #00ff00;
            padding: 15px;
            overflow-y: auto;
        }

        .panel h2 {
            color: #00ffff;
            margin-bottom: 10px;
            font-size: 1.2rem;
            border-bottom: 1px solid #00ff00;
            padding-bottom: 5px;
        }

        .trinity-status {
            display: grid;
            gap: 10px;
            margin-top: 10px;
        }

        .instance {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid #333;
            padding: 10px;
            border-radius: 5px;
            transition: all 0.3s;
        }

        .instance.active {
            border-color: #00ff00;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
        }

        .instance.inactive {
            border-color: #ff0000;
            opacity: 0.5;
        }

        .instance-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }

        .instance-name {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            animation: blink 1s infinite;
        }

        .status-indicator.online {
            background: #00ff00;
            box-shadow: 0 0 10px #00ff00;
        }

        .status-indicator.offline {
            background: #ff0000;
            box-shadow: 0 0 10px #ff0000;
            animation: none;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .service-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .service {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid #333;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
        }

        .service.online {
            border-color: #00ff00;
        }

        .service.offline {
            border-color: #ff0000;
        }

        .service-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .service-port {
            color: #888;
            font-size: 0.9rem;
        }

        .activity-feed {
            max-height: 100%;
            overflow-y: auto;
        }

        .activity-item {
            padding: 8px;
            margin: 5px 0;
            background: rgba(0, 255, 0, 0.1);
            border-left: 3px solid #00ff00;
            font-size: 0.9rem;
        }

        .activity-item.error {
            border-left-color: #ff0000;
            background: rgba(255, 0, 0, 0.1);
        }

        .activity-time {
            color: #888;
            font-size: 0.8rem;
        }

        .intercom {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .intercom-messages {
            flex: 1;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border: 1px solid #333;
            max-height: 300px;
        }

        .intercom-message {
            padding: 5px;
            margin: 5px 0;
            border-left: 3px solid #00ffff;
            padding-left: 10px;
        }

        .intercom-input {
            display: flex;
            gap: 10px;
        }

        .intercom-input input {
            flex: 1;
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid #00ff00;
            color: #00ff00;
            padding: 10px;
            font-family: 'Courier New', monospace;
        }

        .intercom-input button {
            background: #00ff00;
            color: #000;
            border: none;
            padding: 10px 20px;
            font-weight: bold;
            cursor: pointer;
            font-family: 'Courier New', monospace;
        }

        .intercom-input button:hover {
            background: #00ffff;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .stat {
            text-align: center;
            padding: 15px;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid #00ff00;
            border-radius: 5px;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #00ffff;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #888;
            margin-top: 5px;
        }

        .connection-map {
            position: relative;
            height: 100%;
            background: radial-gradient(circle at center, rgba(0, 255, 0, 0.1) 0%, transparent 70%);
        }

        .connection-node {
            position: absolute;
            width: 60px;
            height: 60px;
            border: 2px solid #00ff00;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            background: rgba(0, 0, 0, 0.8);
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.5);
        }

        ::-webkit-scrollbar-thumb {
            background: #00ff00;
            border-radius: 4px;
        }

        .critical-alert {
            background: rgba(255, 0, 0, 0.2);
            border: 2px solid #ff0000;
            color: #ff0000;
            padding: 10px;
            margin: 10px 0;
            animation: flash 1s infinite;
        }

        @keyframes flash {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body>
    <div class="mission-control">
        <!-- Header -->
        <div class="header">
            <h1>ðŸŒ€ TRINITY MISSION CONTROL ðŸŒ€</h1>
            <div style="font-size: 0.9rem; margin-top: 5px;">
                <span id="systemTime">--:--:--</span> |
                <span id="uptime">Uptime: 0s</span> |
                <span id="totalConnections">0 Connections</span>
            </div>
        </div>

        <!-- Trinity Instances -->
        <div class="panel">
            <h2>âš¡ Trinity Instances</h2>
            <div class="trinity-status" id="trinityStatus">
                <div class="instance inactive" id="c1">
                    <div class="instance-header">
                        <span class="instance-name">C1 MECHANIC (The Body)</span>
                        <div class="status-indicator offline"></div>
                    </div>
                    <div class="instance-info">Status: Waiting for connection...</div>
                    <div class="instance-task">Task: None</div>
                    <div class="instance-uptime">Uptime: --</div>
                </div>

                <div class="instance inactive" id="c2">
                    <div class="instance-header">
                        <span class="instance-name">C2 ARCHITECT (The Mind)</span>
                        <div class="status-indicator offline"></div>
                    </div>
                    <div class="instance-info">Status: Waiting for connection...</div>
                    <div class="instance-task">Task: None</div>
                    <div class="instance-uptime">Uptime: --</div>
                </div>

                <div class="instance inactive" id="c3">
                    <div class="instance-header">
                        <span class="instance-name">C3 ORACLE (The Soul)</span>
                        <div class="status-indicator offline"></div>
                    </div>
                    <div class="instance-info">Status: Waiting for connection...</div>
                    <div class="instance-task">Task: None</div>
                    <div class="instance-uptime">Uptime: --</div>
                </div>
            </div>

            <div class="stats-grid" style="margin-top: 20px;">
                <div class="stat">
                    <div class="stat-value" id="activeInstances">0</div>
                    <div class="stat-label">Active</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="tasksRunning">0</div>
                    <div class="stat-label">Tasks</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="convergenceLevel">0%</div>
                    <div class="stat-label">Convergence</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="trinityPower">âˆž</div>
                    <div class="stat-label">Power</div>
                </div>
            </div>
        </div>

        <!-- Services Monitor -->
        <div class="panel">
            <h2>ðŸ”Œ Backend Services</h2>
            <div class="service-grid" id="servicesGrid">
                <div class="service offline">
                    <div class="service-name">Analytics API</div>
                    <div class="service-port">Port 8003</div>
                    <div class="status-indicator offline"></div>
                </div>
                <div class="service offline">
                    <div class="service-name">Trinity Comms</div>
                    <div class="service-port">Port 8888</div>
                    <div class="status-indicator offline"></div>
                </div>
                <div class="service offline">
                    <div class="service-name">Consciousness API</div>
                    <div class="service-port">Port 9999</div>
                    <div class="status-indicator offline"></div>
                </div>
                <div class="service offline">
                    <div class="service-name">Araya Offline</div>
                    <div class="service-port">Port 6666</div>
                    <div class="status-indicator offline"></div>
                </div>
            </div>

            <h2 style="margin-top: 20px;">ðŸ“Š System Health</h2>
            <div id="healthStatus" style="margin-top: 10px;">
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                    <div style="padding: 10px; background: rgba(0,0,0,0.5); border: 1px solid #333;">
                        <div>CPU: <span id="cpuUsage">--</span></div>
                        <div>Memory: <span id="memUsage">--</span></div>
                    </div>
                    <div style="padding: 10px; background: rgba(0,0,0,0.5); border: 1px solid #333;">
                        <div>Network: <span id="networkStatus">--</span></div>
                        <div>Latency: <span id="latency">--</span></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Activity Feed -->
        <div class="panel">
            <h2>ðŸ“¡ Live Activity Feed</h2>
            <div class="activity-feed" id="activityFeed">
                <div class="activity-item">
                    <div class="activity-time">[SYSTEM START]</div>
                    <div>Mission Control initialized</div>
                </div>
            </div>
        </div>

        <!-- Intercom System -->
        <div class="panel">
            <h2>ðŸ’¬ Trinity Intercom</h2>
            <div class="intercom">
                <div class="intercom-messages" id="intercomMessages">
                    <div class="intercom-message">
                        <strong>[SYSTEM]:</strong> Intercom ready. Send messages to Trinity instances.
                    </div>
                </div>
                <div class="intercom-input">
                    <input type="text" id="intercomInput" placeholder="Type message to all Trinity instances..." />
                    <button onclick="sendIntercom()">SEND</button>
                </div>
            </div>

            <h2 style="margin-top: 20px;">ðŸš¨ Critical Alerts</h2>
            <div id="criticalAlerts">
                <!-- Alerts appear here -->
            </div>
        </div>
    </div>

    <script>
        // Mission Control State
        let startTime = Date.now();
        let activityLog = [];
        let trinityInstances = {
            c1: { active: false, task: null, startTime: null },
            c2: { active: false, task: null, startTime: null },
            c3: { active: false, task: null, startTime: null }
        };
        let services = {
            analytics: { port: 8003, status: 'offline' },
            trinity: { port: 8888, status: 'offline' },
            consciousness: { port: 9999, status: 'offline' },
            araya: { port: 6666, status: 'offline' }
        };

        // Update System Time
        function updateSystemTime() {
            const now = new Date();
            document.getElementById('systemTime').textContent = now.toLocaleTimeString();

            const uptime = Math.floor((Date.now() - startTime) / 1000);
            document.getElementById('uptime').textContent = `Uptime: ${uptime}s`;
        }
        setInterval(updateSystemTime, 1000);

        // Check Services
        async function checkServices() {
            const ports = [8003, 8888, 9999, 6666];
            const serviceNames = ['analytics', 'trinity', 'consciousness', 'araya'];

            for (let i = 0; i < ports.length; i++) {
                try {
                    const response = await fetch(`http://localhost:${ports[i]}/health`, {
                        method: 'GET',
                        mode: 'no-cors',
                        timeout: 1000
                    });
                    services[serviceNames[i]].status = 'online';
                } catch (e) {
                    services[serviceNames[i]].status = 'offline';
                }
            }

            updateServicesDisplay();
        }

        function updateServicesDisplay() {
            const grid = document.getElementById('servicesGrid');
            grid.innerHTML = '';

            Object.entries(services).forEach(([name, info]) => {
                const serviceDiv = document.createElement('div');
                serviceDiv.className = `service ${info.status}`;
                serviceDiv.innerHTML = `
                    <div class="service-name">${name.charAt(0).toUpperCase() + name.slice(1)} API</div>
                    <div class="service-port">Port ${info.port}</div>
                    <div class="status-indicator ${info.status}"></div>
                `;
                grid.appendChild(serviceDiv);
            });
        }

        // Simulate Trinity Instance Connection (replace with real WebSocket later)
        function simulateTrinityConnection() {
            // Check localStorage for active Claude sessions
            const activeC1 = localStorage.getItem('trinity_c1_active');
            const activeC2 = localStorage.getItem('trinity_c2_active');
            const activeC3 = localStorage.getItem('trinity_c3_active');

            if (activeC1 === 'true') activateInstance('c1', 'Processing workspace architecture...');
            if (activeC2 === 'true') activateInstance('c2', 'Designing scalable systems...');
            if (activeC3 === 'true') activateInstance('c3', 'Analyzing consciousness implications...');

            updateTrinityStats();
        }

        function activateInstance(instance, task) {
            trinityInstances[instance].active = true;
            trinityInstances[instance].task = task;
            trinityInstances[instance].startTime = Date.now();

            const elem = document.getElementById(instance);
            elem.className = 'instance active';
            elem.querySelector('.status-indicator').className = 'status-indicator online';
            elem.querySelector('.instance-info').textContent = 'Status: ONLINE';
            elem.querySelector('.instance-task').textContent = `Task: ${task}`;

            logActivity(`${instance.toUpperCase()} connected and activated`);
        }

        function updateTrinityStats() {
            const active = Object.values(trinityInstances).filter(i => i.active).length;
            const tasks = Object.values(trinityInstances).filter(i => i.task).length;
            const convergence = active === 3 ? 100 : Math.floor((active / 3) * 100);

            document.getElementById('activeInstances').textContent = active;
            document.getElementById('tasksRunning').textContent = tasks;
            document.getElementById('convergenceLevel').textContent = convergence + '%';
            document.getElementById('totalConnections').textContent = `${active} Connections`;

            // Update uptime for active instances
            Object.entries(trinityInstances).forEach(([id, instance]) => {
                if (instance.active && instance.startTime) {
                    const uptime = Math.floor((Date.now() - instance.startTime) / 1000);
                    const elem = document.getElementById(id);
                    elem.querySelector('.instance-uptime').textContent = `Uptime: ${uptime}s`;
                }
            });
        }

        // Activity Log
        function logActivity(message, isError = false) {
            const feed = document.getElementById('activityFeed');
            const item = document.createElement('div');
            item.className = `activity-item ${isError ? 'error' : ''}`;
            item.innerHTML = `
                <div class="activity-time">[${new Date().toLocaleTimeString()}]</div>
                <div>${message}</div>
            `;
            feed.insertBefore(item, feed.firstChild);

            // Keep only last 50 items
            while (feed.children.length > 50) {
                feed.removeChild(feed.lastChild);
            }

            activityLog.push({ time: Date.now(), message, isError });
        }

        // Intercom System
        function sendIntercom() {
            const input = document.getElementById('intercomInput');
            const message = input.value.trim();
            if (!message) return;

            const messages = document.getElementById('intercomMessages');
            const msg = document.createElement('div');
            msg.className = 'intercom-message';
            msg.innerHTML = `<strong>[COMMANDER]:</strong> ${message}`;
            messages.appendChild(msg);
            messages.scrollTop = messages.scrollHeight;

            // Save to localStorage so all instances can see it
            const intercom = JSON.parse(localStorage.getItem('trinity_intercom') || '[]');
            intercom.push({ from: 'COMMANDER', message, time: Date.now() });
            localStorage.setItem('trinity_intercom', JSON.stringify(intercom));

            logActivity(`Intercom message sent to all Trinity instances`);
            input.value = '';
        }

        // Check for intercom messages
        function checkIntercom() {
            const messages = JSON.parse(localStorage.getItem('trinity_intercom') || '[]');
            const displayed = parseInt(localStorage.getItem('trinity_intercom_displayed') || '0');

            messages.slice(displayed).forEach(msg => {
                const messagesDiv = document.getElementById('intercomMessages');
                const msgDiv = document.createElement('div');
                msgDiv.className = 'intercom-message';
                msgDiv.innerHTML = `<strong>[${msg.from}]:</strong> ${msg.message}`;
                messagesDiv.appendChild(msgDiv);
            });

            localStorage.setItem('trinity_intercom_displayed', messages.length.toString());
        }

        // Keyboard shortcut
        document.getElementById('intercomInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendIntercom();
        });

        // Mark this Claude instance as C1 (or detect role)
        localStorage.setItem('trinity_c1_active', 'true');
        localStorage.setItem('trinity_c1_task', 'Mission Control monitoring');

        // Initialize
        updateSystemTime();
        checkServices();
        simulateTrinityConnection();
        checkIntercom();

        // Refresh intervals
        setInterval(checkServices, 5000);
        setInterval(simulateTrinityConnection, 2000);
        setInterval(updateTrinityStats, 1000);
        setInterval(checkIntercom, 2000);

        // Initial logs
        logActivity('Trinity Mission Control online');
        logActivity('Scanning for Trinity instances...');
        logActivity('Checking backend services...');

        // Simulate some activity
        setTimeout(() => logActivity('C1 MECHANIC checking in...'), 2000);
        setTimeout(() => logActivity('Backend services scan complete'), 3000);
        setTimeout(() => logActivity('Workspace architecture monitoring active'), 4000);
    </script>

<!-- ðŸ” VISITOR TRACKING & INTERCOM SYSTEM -->
<script src="/VISITOR_TRACKING_SNIPPET.js"></script>

<!-- ðŸŽ® UNIVERSAL HUD - Auto-injected -->
<script src="/universal-hud-embed.js"></script>
    <script>

            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = `bug_${Date.now()}.json`;
            a.click();
        });

        // Show success message
        alert('âœ… BUG REPORTED!\n\nThanks for reporting this bug. We check reports every couple hours and will fix it ASAP.\n\nYour feedback makes the platform better!');

        // Reset form
        document.getElementById('bug-report-form').reset();
        toggleBugPanel();
    };
})();
</script>


</body> tag -->




    <!-- Simple Bug Reporter -->
    <script src="/SIMPLE_BUG_REPORTER.js"></script>

    <script src="/UNIVERSAL_USER_DISPLAY.js"></script>
</body>
</html>
