/*
=================================================================
ðŸ”§ MOBILE RESPONSIVE FIX - Modern Phone Desktop View
=================================================================
October 17, 2025

PROBLEM: Mobile app stuck in narrow old phone mode
SOLUTION: Allow desktop view on modern phones (zoom out capability)

Modern phones can handle desktop views - let them!
*/

/* ============================================
   VIEWPORT META - Already in HTML but ensuring it's correct
   ============================================ */
/*
Required in HTML <head>:
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=5.0, user-scalable=yes">
*/

/* ============================================
   ROOT VARIABLES FOR RESPONSIVE BREAKPOINTS
   ============================================ */
:root {
    --phone-min: 320px;
    --phone-max: 480px;
    --tablet-min: 481px;
    --tablet-max: 768px;
    --desktop-min: 769px;

    /* Allow shrinking for desktop view on phones */
    --content-max-width: 100%;
    --content-min-width: 320px;
}

/* ============================================
   ALLOW ZOOM AND DESKTOP VIEW
   ============================================ */
html {
    /* Allow pinch-to-zoom on mobile */
    touch-action: manipulation;

    /* Smooth scrolling */
    scroll-behavior: smooth;

    /* Allow shrinking content to see desktop view */
    min-width: var(--content-min-width);
}

body {
    /* Remove forced mobile width */
    min-width: var(--content-min-width);
    max-width: 100%;

    /* Allow horizontal scroll if needed (desktop view on mobile) */
    overflow-x: auto;

    /* Webkit smooth scrolling */
    -webkit-overflow-scrolling: touch;
}

/* ============================================
   CONTAINERS - FLEXIBLE WIDTHS
   ============================================ */
.container,
.terminal-container,
#container,
.header,
.activity-section {
    /* Don't force narrow width on phones */
    max-width: none !important;

    /* Allow natural sizing */
    width: 100%;

    /* Responsive padding */
    padding-left: clamp(10px, 3vw, 20px);
    padding-right: clamp(10px, 3vw, 20px);
}

/* ============================================
   GRIDS - RESPONSIVE BUT NOT FORCED
   ============================================ */
.dashboard-grid,
.online-users,
.project-grid {
    /* Default: responsive grid */
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
}

/* ============================================
   MODERN MOBILE (375px+) - ALLOW DESKTOP VIEW
   ============================================ */
@media screen and (min-width: 375px) {
    /* Modern phones can see more columns */
    .dashboard-grid {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    }

    .online-users,
    .project-grid {
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    }
}

/* ============================================
   LANDSCAPE MODE - MORE DESKTOP-LIKE
   ============================================ */
@media screen and (orientation: landscape) and (max-width: 896px) {
    body {
        /* Allow full desktop experience in landscape */
        min-width: 100vw;
    }

    .dashboard-grid {
        /* More columns in landscape */
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    }
}

/* ============================================
   TABLET AND UP - FULL DESKTOP
   ============================================ */
@media screen and (min-width: 768px) {
    /* Full desktop layout */
    .dashboard-grid,
    .online-users,
    .project-grid {
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    }
}

/* ============================================
   PREVENT FORCED MOBILE OVERRIDES
   ============================================ */
@media screen and (max-width: 768px) {
    /* DON'T force single column on tablets/phones */
    /* Let content flow naturally */

    /* Allow natural grid sizing */
    .dashboard-grid:not(.force-mobile),
    .online-users:not(.force-mobile),
    .project-grid:not(.force-mobile) {
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)) !important;
    }

    /* Headers can stack but don't have to */
    .header {
        flex-wrap: wrap;
        justify-content: space-between;
    }
}

/* ============================================
   TINY SCREENS ONLY (<375px) - GENTLE MOBILE
   ============================================ */
@media screen and (max-width: 374px) {
    /* Only on VERY small screens, stack content */
    .dashboard-grid,
    .online-users,
    .project-grid {
        grid-template-columns: 1fr;
    }

    .header {
        flex-direction: column;
        gap: 10px;
    }
}

/* ============================================
   TEXT READABILITY - SCALE WITH VIEWPORT
   ============================================ */
h1 {
    font-size: clamp(24px, 5vw, 48px);
}

h2 {
    font-size: clamp(20px, 4vw, 32px);
}

h3 {
    font-size: clamp(16px, 3vw, 24px);
}

p, li, span {
    font-size: clamp(14px, 2vw, 16px);
}

/* ============================================
   BUTTONS - TOUCH FRIENDLY
   ============================================ */
button,
.btn,
.control-btn,
.refresh-btn {
    /* Minimum touch target size (Apple HIG: 44px) */
    min-height: 44px;
    min-width: 44px;

    /* Adequate padding */
    padding: 12px 24px;

    /* Prevent text selection on tap */
    user-select: none;
    -webkit-tap-highlight-color: transparent;
}

/* ============================================
   INPUTS - MOBILE FRIENDLY
   ============================================ */
input,
textarea,
#terminalInput,
#speech-input {
    /* Prevent auto-zoom on iOS */
    font-size: 16px !important;

    /* Touch-friendly height */
    min-height: 44px;

    /* Adequate padding */
    padding: 12px;
}

/* ============================================
   SCROLLBARS - ALWAYS VISIBLE ON MOBILE
   ============================================ */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.1);
}

::-webkit-scrollbar-thumb {
    background: rgba(0, 255, 255, 0.5);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 255, 255, 0.7);
}

/* ============================================
   TERMINAL - MOBILE OPTIMIZATION
   ============================================ */
.terminal-container {
    /* Allow full viewport on mobile */
    min-height: 100vh;
    max-height: 100vh;
}

.terminal-output {
    /* Scrollable area */
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;

    /* Adequate padding for readability */
    padding: clamp(10px, 3vw, 20px);
}

.terminal-input-container {
    /* Sticky to bottom */
    position: sticky;
    bottom: 0;

    /* Full width */
    width: 100%;
}

/* ============================================
   ARIA AVATAR - MOBILE LAYOUT
   ============================================ */
@media screen and (max-width: 768px) {
    #aria-container {
        /* Stack vertically on mobile if needed */
        width: 100%;
        height: auto;
        border-right: none;
        border-bottom: 3px solid #00ff88;
    }

    #container {
        /* Stack layout */
        flex-direction: column;
    }
}

/* ============================================
   ACCESSIBILITY - FOCUS INDICATORS
   ============================================ */
*:focus-visible {
    outline: 2px solid #00ff88;
    outline-offset: 2px;
}

button:focus-visible,
a:focus-visible {
    outline: 3px solid #00ffff;
    outline-offset: 3px;
}

/* ============================================
   PERFORMANCE - GPU ACCELERATION
   ============================================ */
.animate,
.transition,
.stats-card,
.user-card,
.project-card {
    /* Enable hardware acceleration */
    transform: translateZ(0);
    will-change: transform;
}

/* ============================================
   SAFE AREA - NOTCH SUPPORT (iPhone X+)
   ============================================ */
@supports (padding: max(0px)) {
    body {
        padding-left: max(0px, env(safe-area-inset-left));
        padding-right: max(0px, env(safe-area-inset-right));
        padding-bottom: max(0px, env(safe-area-inset-bottom));
    }

    .header {
        padding-top: max(20px, env(safe-area-inset-top));
    }
}

/* ============================================
   PRINT STYLES - BONUS
   ============================================ */
@media print {
    /* Hide unnecessary elements */
    .live-indicator,
    .status-dot,
    button,
    .terminal-input-container {
        display: none !important;
    }

    /* Show all content */
    .terminal-output,
    .activity-section {
        max-height: none !important;
        overflow: visible !important;
    }
}

/* ============================================
   DARK MODE SUPPORT - BONUS
   ============================================ */
@media (prefers-color-scheme: light) {
    /* If user prefers light mode, adjust colors */
    /* (Most of our UI is already dark, so optional) */
}

@media (prefers-reduced-motion: reduce) {
    /* Respect user's motion preferences */
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* ============================================
   HIGH CONTRAST MODE - ACCESSIBILITY
   ============================================ */
@media (prefers-contrast: high) {
    /* Increase contrast for accessibility */
    :root {
        --accent-primary: #00ffff;
        --text-primary: #00ff00;
        --bg-primary: #000;
    }
}

/* =================================================================
   âœ… MOBILE RESPONSIVE FIX COMPLETE
   =================================================================

   WHAT THIS DOES:
   1. âœ… Allows users to zoom out and see desktop view
   2. âœ… Doesn't force narrow "old phone" layout
   3. âœ… Responsive grids that adapt naturally
   4. âœ… Touch-friendly buttons (44px minimum)
   5. âœ… Prevents iOS auto-zoom on input focus
   6. âœ… Safe area support for notched phones
   7. âœ… Smooth scrolling everywhere
   8. âœ… GPU acceleration for animations
   9. âœ… Accessibility (focus indicators, reduced motion)
   10. âœ… Works on phones, tablets, desktops

   COMMANDER: Your users can now zoom out and see the full
   desktop experience on their modern phones. No more narrow
   old phone view!

   ================================================================= */
