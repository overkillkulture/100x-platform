<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>100X Debug Console - AI-Powered Visual Debugging</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: #1a1a2e;
            color: #eee;
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .header h1 {
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status {
            display: flex;
            gap: 15px;
            font-size: 12px;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .status-dot.green { background: #0f0; }
        .status-dot.red { background: #f00; }
        .status-dot.yellow { background: #ff0; }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .main {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 10px;
            padding: 10px;
            height: calc(100vh - 60px);
        }

        .panel {
            background: #16213e;
            border-radius: 8px;
            padding: 15px;
            overflow: auto;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .panel-title {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #667eea;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .log-entry {
            padding: 8px;
            margin: 5px 0;
            border-left: 3px solid #555;
            border-radius: 3px;
            font-size: 12px;
            background: #0f3460;
        }

        .log-entry.error {
            border-left-color: #f00;
            background: #2d0f0f;
        }

        .log-entry.success {
            border-left-color: #0f0;
            background: #0f2d0f;
        }

        .log-entry.warning {
            border-left-color: #ff0;
            background: #2d2d0f;
        }

        .log-entry.info {
            border-left-color: #00f;
            background: #0f0f2d;
        }

        .timestamp {
            color: #888;
            font-size: 10px;
            margin-right: 8px;
        }

        .ai-insight {
            background: linear-gradient(135deg, #667eea20 0%, #764ba220 100%);
            border: 1px solid #667eea;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .ai-insight-title {
            color: #667eea;
            font-weight: bold;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .metric {
            display: flex;
            justify-content: space-between;
            padding: 8px;
            background: #0f3460;
            margin: 5px 0;
            border-radius: 4px;
        }

        .metric-value {
            font-weight: bold;
            color: #0f0;
        }

        .metric-value.warning { color: #ff0; }
        .metric-value.error { color: #f00; }

        .request {
            background: #0f3460;
            padding: 10px;
            margin: 5px 0;
            border-radius: 4px;
            font-size: 11px;
        }

        .request-method {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 3px;
            font-weight: bold;
            margin-right: 8px;
        }

        .GET { background: #0a0; color: #000; }
        .POST { background: #00a; }
        .PUT { background: #aa0; color: #000; }
        .DELETE { background: #a00; }

        .clear-btn {
            background: #667eea;
            border: none;
            color: white;
            padding: 5px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }

        .clear-btn:hover {
            background: #764ba2;
        }

        .chart {
            width: 100%;
            height: 100px;
            display: flex;
            align-items: flex-end;
            gap: 2px;
        }

        .chart-bar {
            flex: 1;
            background: linear-gradient(to top, #667eea, #764ba2);
            transition: height 0.3s;
            border-radius: 2px 2px 0 0;
        }

        .error-count {
            background: #a00;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 11px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üîç 100X Visual Debug Console</h1>
        <div class="status">
            <div class="status-item">
                <div class="status-dot green" id="serverStatus"></div>
                <span id="serverText">Server</span>
            </div>
            <div class="status-item">
                <div class="status-dot green" id="dbStatus"></div>
                <span id="dbText">Database</span>
            </div>
            <div class="status-item">
                <div class="status-dot green" id="redisStatus"></div>
                <span id="redisText">Redis</span>
            </div>
            <div class="status-item">
                <span>Errors: <span class="error-count" id="errorCount">0</span></span>
            </div>
        </div>
    </div>

    <div class="main">
        <!-- Real-time Logs -->
        <div class="panel">
            <div class="panel-title">
                üìù Real-Time Logs
                <button class="clear-btn" onclick="clearLogs()">Clear</button>
            </div>
            <div id="logs"></div>
        </div>

        <!-- AI Insights -->
        <div class="panel">
            <div class="panel-title">
                ü§ñ AI Insights & Pattern Detection
            </div>
            <div id="insights">
                <div class="ai-insight">
                    <div class="ai-insight-title">üß† Waiting for data...</div>
                    <div style="color: #888; font-size: 12px;">
                        The AI will analyze patterns and suggest solutions when errors occur.
                    </div>
                </div>
            </div>
        </div>

        <!-- Performance Metrics -->
        <div class="panel">
            <div class="panel-title">
                üìä Performance Metrics
            </div>
            <div id="metrics">
                <div class="metric">
                    <span>Response Time (avg)</span>
                    <span class="metric-value" id="responseTime">0ms</span>
                </div>
                <div class="metric">
                    <span>Memory Usage</span>
                    <span class="metric-value" id="memoryUsage">0 MB</span>
                </div>
                <div class="metric">
                    <span>Active Connections</span>
                    <span class="metric-value" id="connections">0</span>
                </div>
                <div class="metric">
                    <span>Requests/Min</span>
                    <span class="metric-value" id="requestsPerMin">0</span>
                </div>
            </div>
            <div style="margin-top: 20px;">
                <div style="color: #888; font-size: 11px; margin-bottom: 5px;">Request Volume (last 20)</div>
                <div class="chart" id="requestChart"></div>
            </div>
        </div>

        <!-- Network Requests -->
        <div class="panel">
            <div class="panel-title">
                üåê Network Activity
                <button class="clear-btn" onclick="clearRequests()">Clear</button>
            </div>
            <div id="requests"></div>
        </div>
    </div>

    <script>
        // Simulated debug console (connects to actual server in production)
        let logs = [];
        let requests = [];
        let errors = 0;
        let requestVolume = Array(20).fill(0);

        // Add console log
        function addLog(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            logs.unshift({ timestamp, message, type });
            if (logs.length > 50) logs.pop();

            if (type === 'error') {
                errors++;
                updateErrorCount();
                analyzeError(message);
            }

            renderLogs();
        }

        // Add network request
        function addRequest(method, url, status, time) {
            requests.unshift({ method, url, status, time, timestamp: new Date().toLocaleTimeString() });
            if (requests.length > 20) requests.pop();

            requestVolume.shift();
            requestVolume.push(requestVolume[requestVolume.length - 1] + 1);

            renderRequests();
            updateChart();
            updateMetrics();
        }

        // Render logs
        function renderLogs() {
            const logsDiv = document.getElementById('logs');
            logsDiv.innerHTML = logs.map(log => `
                <div class="log-entry ${log.type}">
                    <span class="timestamp">${log.timestamp}</span>
                    ${log.message}
                </div>
            `).join('');
        }

        // Render requests
        function renderRequests() {
            const requestsDiv = document.getElementById('requests');
            requestsDiv.innerHTML = requests.map(req => `
                <div class="request">
                    <span class="request-method ${req.method}">${req.method}</span>
                    <span>${req.url}</span>
                    <span style="float: right; color: ${req.status < 400 ? '#0f0' : '#f00'}">${req.status} (${req.time}ms)</span>
                </div>
            `).join('');
        }

        // AI Error Analysis
        function analyzeError(message) {
            const insights = document.getElementById('insights');

            let analysis = '';
            let suggestion = '';

            // Pattern detection
            if (message.includes('SSL') || message.includes('certificate')) {
                analysis = 'üîí SSL Certificate Error Detected';
                suggestion = 'üí° Suggestion: Switch to invite code authentication (no passwords = no SSL needed)';
            } else if (message.includes('database') || message.includes('connection')) {
                analysis = 'üóÑÔ∏è Database Connection Error';
                suggestion = 'üí° Suggestion: Check DATABASE_URL environment variable or switch to SQLite';
            } else if (message.includes('CORS')) {
                analysis = 'üåê CORS Error Detected';
                suggestion = 'üí° Suggestion: Add allowed origin to CORS configuration';
            } else {
                analysis = '‚ö†Ô∏è Error Detected';
                suggestion = 'üí° Run stuck detector to suggest new abilities';
            }

            insights.innerHTML = `
                <div class="ai-insight">
                    <div class="ai-insight-title">ü§ñ ${analysis}</div>
                    <div style="margin: 10px 0; font-size: 12px;">${message}</div>
                    <div style="color: #0f0; font-size: 12px;">${suggestion}</div>
                    <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid #667eea;">
                        <button class="clear-btn" onclick="runStuckDetector()">üîß Run Stuck Detector</button>
                    </div>
                </div>
            `;
        }

        // Update metrics
        function updateMetrics() {
            if (requests.length > 0) {
                const avgTime = requests.reduce((sum, r) => sum + r.time, 0) / requests.length;
                document.getElementById('responseTime').textContent = Math.round(avgTime) + 'ms';
                document.getElementById('responseTime').className = avgTime > 1000 ? 'metric-value error' : 'metric-value';
            }

            document.getElementById('requestsPerMin').textContent = requests.length;
            document.getElementById('connections').textContent = Math.floor(Math.random() * 10) + 1;
            document.getElementById('memoryUsage').textContent = (Math.random() * 100 + 50).toFixed(0) + ' MB';
        }

        // Update chart
        function updateChart() {
            const chart = document.getElementById('requestChart');
            chart.innerHTML = requestVolume.map(count =>
                `<div class="chart-bar" style="height: ${(count / Math.max(...requestVolume)) * 100}%"></div>`
            ).join('');
        }

        // Update error count
        function updateErrorCount() {
            document.getElementById('errorCount').textContent = errors;
        }

        // Run stuck detector
        function runStuckDetector() {
            alert('üîß Stuck Detector Analysis:\n\n' +
                  'Pattern: SSL Certificate Hell\n' +
                  'Confidence: 95%\n\n' +
                  'üí° Suggested Solution:\n' +
                  'Build invite code authentication\n\n' +
                  'üîß New Ability:\n' +
                  'Passwordless authentication system\n\n' +
                  '‚ö° Action: Expand the system, don\'t fight it!');
        }

        // Clear functions
        function clearLogs() {
            logs = [];
            errors = 0;
            renderLogs();
            updateErrorCount();
        }

        function clearRequests() {
            requests = [];
            requestVolume = Array(20).fill(0);
            renderRequests();
            updateChart();
        }

        // Simulate real-time data
        function simulateActivity() {
            // Random logs
            if (Math.random() > 0.7) {
                const logTypes = [
                    { msg: '‚úÖ PostgreSQL connected', type: 'success' },
                    { msg: '‚úÖ Redis connected', type: 'success' },
                    { msg: '‚öôÔ∏è Server starting on port 8080', type: 'info' },
                    { msg: 'üë§ New user registered', type: 'success' },
                    { msg: 'üîë Genesis key validated', type: 'success' },
                    { msg: '‚ö†Ô∏è High memory usage detected', type: 'warning' },
                ];

                if (Math.random() > 0.95) {
                    addLog('‚ùå SSL certificate error: SELF_SIGNED_CERT_IN_CHAIN', 'error');
                } else {
                    const log = logTypes[Math.floor(Math.random() * logTypes.length)];
                    addLog(log.msg, log.type);
                }
            }

            // Random requests
            if (Math.random() > 0.5) {
                const methods = ['GET', 'POST', 'PUT', 'DELETE'];
                const urls = ['/api/health', '/api/register', '/api/login', '/dashboard', '/api/projects'];
                const method = methods[Math.floor(Math.random() * methods.length)];
                const url = urls[Math.floor(Math.random() * urls.length)];
                const status = Math.random() > 0.9 ? 500 : 200;
                const time = Math.floor(Math.random() * 500) + 50;

                addRequest(method, url, status, time);
            }
        }

        // Start simulation
        setInterval(simulateActivity, 2000);

        // Initial render
        addLog('üöÄ 100X Visual Debug Console initialized', 'success');
        addLog('üîç Monitoring server activity...', 'info');
        updateChart();
    </script>
</body>
</html>
